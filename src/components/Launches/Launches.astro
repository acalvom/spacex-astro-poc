---
import { type Doc, type SpaceXAPIResponse } from '@interfaces/api'
import LaunchCard  from './LaunchCard.astro'

const response = await fetch('https://api.spacexdata.com/v4/launches/query', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    options: {
      limit: 10,
      sort: { date_unix: 'asc' }
    }
  })
})
const data: SpaceXAPIResponse = await response.json()
const lastLaunches: Doc[] = data.docs
---

<section class="w-full p-4 mx-auto">
  <h3 class="text-3xl lg:text-4xl tracking-tight text-white text-center font-bold mb-4">
    Ãšltimos lanzamientos
  </h3>
  <div class="flex flex-wrap justify-evenly mx-4">
    {
      lastLaunches.map(({ name, flight_number, details, success, links }) => (
        <LaunchCard
          name={name}
          flight_number={flight_number}
          details={details}
          success={success}
          image={links.patch.small}
        />
      ))
    }
  </div>
</section>
